<tool id="kmedoid_tool" name="K-Medoid">
  <description>Clustering tool for time series</description>
  <command interpreter="python">
      kmedoid_tool.py -d $input -s tab -c $k -i $it -S $seed -o $output
      #if $compute.pu == "CPU"
        -p CPU -d $compute.distance.dist
        #if $compute.distance.fast_dtw.fast == "True"
          -f True -r $compute.distance.fast_dtw.radius
        #end if
      #elif $compute.pu == "GPU"
          -p GPU -dist $compute.dist
      #end if
  </command>
  <inputs>
    <param format="tabular" name="input" type="data" label="Source file"/>
    <param name="k" type="integer" value="2" label="Number of clusters" />
    <param name="it" type="text" value="None" label="Number of iterations" />
    <conditional name="compute">
      <param name="pu" type="select" label="Compute using: ">
        <option value="CPU">CPU</option>
        <option value="GPU">GPU</option>
      </param>
      <when value="CPU">
        <conditional name="distance">
          <param name="dist" type="select" label="Distance">
            <option value="ddtw">Derivative DTW</option>
            <option value="dtw">DTW</option>
            <option value="euclidean">Euclidean</option>
            <option value="pearson">Pearson</option>
          </param>
          <when value="ddtw">
            <conditional name="fast_dtw">
              <param name="fast" type="select" label="Fast DTW">
                <option value="False">False</option>
                <option value="True">True</option>
              </param>
              <when value="True">
                <param name="radius" type="text" value="20" label="Radius - Accuracy of FastDTW" />
              </when>
              <when value="False"></when>
            </conditional>
          </when>
          <when value="dtw">
            <conditional name="fast_dtw">
              <param name="fast" type="select" label="Fast DTW">
                <option value="False">False</option>
                <option value="True">True</option>
              </param>
              <when value="True">
                <param name="radius" type="text" value="20" label="Radius - Accuracy of FastDTW" />
              </when>
              <when value="False"></when>
            </conditional>
          </when>
          <when value="euclidean"></when>
          <when value="pearson"></when>
        </conditional>
      </when>
      <when value="GPU">
        <param name="dist" type="select" label="Distance">
          <option value="ddtw">Derivative DTW</option>
          <option value="dtw">DTW</option>
        </param>
      </when>
    </conditional>

    <param name="seed" type="text" value="None" label="Seed for random function" />

  </inputs>
  <configfiles>
    <configfile name="options">

    </configfile>
  </configfiles>
  <outputs>
    <data format="tabular" name="output" />
  </outputs>
  <help>
.. class:: infomark

**TIP:** If your data is not TAB delimited, use *Text Manipulation-&gt;Convert*

-----

This tool computes a K-Medoid algorithm over a certain number of time series

**Example**

- Input file must be tabular (separated by tabs) and well structured like::

    id   a   b   c   d
    id1  1   9   2   0
    id2  5   2   4   2
    id3  2   3   5   1

- Output: a tabular file with the algorithm data. You can plot clusters or
  get a report using the tools in *Graph/Display Data*

</help>
</tool>

